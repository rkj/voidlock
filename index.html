<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Xenopurge Prototype</title>
    <style>
      body { margin: 0; overflow: hidden; background-color: #1a1a1a; color: #eee; font-family: 'Courier New', Courier, monospace; }
      #app { display: flex; height: 100vh; }
      #game-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; position: relative; overflow: hidden; background-color: #000; }
      canvas { box-shadow: 0 0 20px rgba(0,0,0,0.5); max-width: 100%; max-height: 100%; object-fit: contain; }
      #ui-panel { width: 300px; flex-shrink: 0; padding: 10px; background-color: #222; border-left: 1px solid #444; overflow-y: auto; display: flex; flex-direction: column; }
      h1 { color: #0f0; text-shadow: 0 0 5px #0f0; font-size: 1.2em; margin-bottom: 10px; }
      button { background-color: #333; color: #0f0; border: 1px solid #0f0; padding: 5px 10px; cursor: pointer; margin-top: 5px; width: 100%; }
      button:hover { background-color: #0f0; color: #333; }
      button.active { background-color: #0f0; color: #333; font-weight: bold; }
      .control-group { margin-top: 15px; border-top: 1px solid #444; padding-top: 10px; }
      input[type="file"], input[type="text"], input[type="number"] { margin-top: 5px; color: #000; font-size: 0.8em; width: 100%; box-sizing: border-box; }
      label { display: block; margin-top: 5px; color: #aaa; }
      
      #soldier-list { margin-top: 15px; flex-grow: 1; overflow-y: auto; border-top: 1px solid #444; padding-top: 10px; }
      .soldier-item { padding: 5px; border: 1px solid #333; margin-bottom: 5px; cursor: pointer; }
      .soldier-item:hover { background-color: #333; }
      .soldier-item.selected { border-color: #0f0; background-color: #222; }
      .soldier-item.dead { color: #f00; border-color: #f00; }
      .soldier-item.extracted { color: #0aa; border-color: #0aa; }
      
      .status-line { font-size: 0.8em; color: #aaa; }
      .hp-bar { height: 4px; background: #333; margin-top: 2px; }
      .hp-fill { height: 100%; background: #0f0; }
      
      #command-help { font-size: 0.8em; color: #888; margin-top: 10px; }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="game-container">
        <canvas id="game-canvas"></canvas>
      </div>
      <div id="ui-panel">
        <h1>Xenopurge Prototype</h1>
        <p id="game-status">Status: Initializing...</p>
        
        <div id="soldier-list">
          <!-- Populated by JS -->
        </div>

        <div class="control-group">
          <h3>Commands</h3>
          <button id="cmd-move">Move (M)</button>
          <!-- Add more commands later -->
          <div id="command-help">
            Select Command -> Select Unit -> Target
            <br>Shift+Click to Queue
          </div>
        </div>
        
        <div class="control-group">
          <h3>Mission Control</h3>
          <button id="start-button">Restart Current Mission</button>
        </div>

        <div class="control-group">
          <h3>Map Generation</h3>
          <label for="map-generator-type">Generator Type:</label>
          <select id="map-generator-type">
            <option value="Procedural">Procedural Maze</option>
            <option value="Static">Static Map</option>
          </select>

          <div id="preset-map-controls" style="margin-top: 10px;">
            <label for="preset-map-select">Preset Maps:</label>
            <select id="preset-map-select">
              <option value="">-- Select a preset map --</option>
              <option value="map-screenshot.json">Screenshot Map</option>
            </select>
            <button id="load-preset-map">Load Preset Map</button>
          </div>

          <label for="map-seed">Seed (optional):</label>
          <input type="number" id="map-seed" placeholder="Random" />
          <button id="generate-map">Generate New Mission</button>

          <div id="static-map-controls" style="display: none; margin-top: 10px;">
            <label for="static-map-json">Static Map JSON:</label>
            <textarea id="static-map-json" rows="8" style="width: 100%; box-sizing: border-box;"></textarea>
            <button id="load-static-map">Load Static Mission</button>
          </div>
        </div>
        
        <div class="control-group">
          <h3>Replay Controls</h3>
          <button id="export-replay">Export Replay (JSON)</button>
          <div style="margin-top: 10px;">
            <label for="import-replay">Load Replay:</label>
            <input type="file" id="import-replay" accept=".json" />
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/renderer/main.ts"></script>
  </body>
</html>
